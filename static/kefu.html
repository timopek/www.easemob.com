<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0"/><!-- 手机视图 -->
	<meta content="telephone=no" name="format-detection" />
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<!-- UC默认竖屏 ，UC强制全屏 -->
	<meta name="full-screen" content="yes"/>
	<meta name="browsermode" content="application"/>
	<!-- QQ强制竖屏 QQ强制全屏 -->
	<meta name="x5-orientation" content="portrait"/>
	<meta name="x5-fullscreen" content="true"/>
	<meta name="x5-page-mode" content="app"/>
	<title>欢迎下载环信客服Demo</title>
</head>
<body class="success">
	<style type="text/css">
	*{margin:0; padding:0;}
	img{max-width: 100%; height: auto;}
	.success{background-color:#243a4b}
	.logo img{width: 41.6%; margin: 0 auto; display: block;margin-left:20px;margin-top:20px;}
	.chat img{width: 89.06%; margin: 0 auto; display: block; margin-bottom: 3.4%;}
	.download img{width: 74.67%; margin: 0 auto; display: block; margin-bottom: 3.4%;}
	#weixin-tip{display:none; position: fixed; left:0; top:0; background: rgba(0,0,0,0.8); filter:alpha(opacity=80); width: 100%; height:100%; z-index: 100;} 
	#weixin-tip p{text-align: center; margin-top: 1%; padding:0 5%; position: relative;}
	</style>
	
	<div class="page-wrap" >
		<div class="logo"><img src="icon_kefu_logo.png" alt="logo"></div>
		<div class="chat"><img src="img_kefu_chat.png" alt=""/>
		</div>
		<div class="download"><a id="J_weixin"><img src="icon_dl_kefu_demo.png" alt="button"></a></div>
	</div>
	
	<div id="weixin-tip"><p><img src="tip_weixin_kefu.png" alt="微信打开"></p></div>
	<script type="text/javascript">
		function redirect(){
			/* 智能机浏览器版本信息:   */
	   var browser={
		   versions:function(){
           var u = navigator.userAgent, app = navigator.appVersion;
           return {//移动终端浏览器版本信息
               trident: u.indexOf('Trident') > -1, //IE内核
               presto: u.indexOf('Presto') > -1, //opera内核
               webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
               gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
               mobile: !!u.match(/AppleWebKit.*Mobile.*/)||!!u.match(/AppleWebKit/), //是否为移动终端
               ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
               android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
               iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
               iPad: u.indexOf('iPad') > -1, //是否iPad
               webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
            };
        }(),
        language:(navigator.browserLanguage || navigator.language).toLowerCase()
	   }
	   if(browser.versions.iPhone){
		  document.location.href = "itms-services://?action=download-manifest&url=https://dl.easemob.com/downloads/ChatDemoUI-kefu.plist";
	   }else if(browser.versions.iPad){
		  document.location.href = "itms-services://?action=download-manifest&url=https://dl.easemob.com/downloads/ChatDemoUI-kefu.plist";
	   }else if(browser.versions.android){
		   document.location.href = "http://downloads.easemob.com/downloads/chatdemoui-kefu6.apk";
	   }else{
			document.location.href = "http://downloads.easemob.com/downloads/chatdemoui-kefu6.apk";
	   }
		}
		function is_weixin() {
		    var ua = navigator.userAgent.toLowerCase();
		    if (ua.match(/MicroMessenger/i) == "micromessenger") {
		        return true;
		    } else {
		        return false;
		    }
		}
		var isWeixin = is_weixin();
		var winHeight = typeof window.innerHeight != 'undefined' ? window.innerHeight : document.documentElement.clientHeight;
		if(isWeixin){
				var winHeight = typeof window.innerHeight != 'undefined' ? window.innerHeight : document.documentElement.clientHeight;
				var btn = document.getElementById('J_weixin');
				var tip = document.getElementById('weixin-tip');
				btn.onclick = function(e){
					tip.style.height = winHeight + 'px';
					tip.style.display = 'block';
					return false;
				}
				tip.onclick = function(){
					tip.style.display = 'none';
				}
		}else{
			var btn = document.getElementById('J_weixin');
			btn.onclick = function(e){
					redirect();
			}
			redirect();
		}

	</script>
</body>
</html>

